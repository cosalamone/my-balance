<div class="min-h-screen flex items-center justify-center p-4 relative overflow-hidden">
  <!-- Enhanced Background with Animated Gradient -->
  <div
    class="absolute inset-0 bg-gradient-to-br from-primary-600 via-primary-700 to-secondary-600 animate-gradient-xy"></div>
  <div class="absolute inset-0 bg-black bg-opacity-20"></div>

  <!-- Floating Elements for Visual Interest -->
  <div
    class="absolute top-1/4 left-1/4 w-32 h-32 bg-white bg-opacity-5 rounded-full blur-xl animate-float"></div>
  <div
    class="absolute top-3/4 right-1/4 w-24 h-24 bg-primary-300 bg-opacity-10 rounded-full blur-xl animate-float-delayed"></div>

  <!-- Theme Toggle Button -->
  <div class="absolute top-6 right-6 z-50">
    <mb-theme-toggle></mb-theme-toggle>
  </div>

  <!-- Main Login Container -->
  <div class="max-w-md w-full z-20 relative">
    <!-- Enhanced Logo and Header -->
    <div class="text-center mb-8">
      <div class="mx-auto flex flex-col items-center justify-center mb-4">
        <!-- Improved Logo -->
        <div class="relative mb-6">
          <div
            class="absolute inset-0 bg-gradient-to-r from-primary-400 to-secondary-400 rounded-full blur-lg opacity-75 animate-pulse"></div>
          <div class="relative bg-white rounded-full p-4 shadow-2xl">
            <svg
              width="56"
              height="56"
              viewBox="0 0 64 64"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <circle cx="32" cy="32" r="28" fill="url(#paint0_linear)" />
              <path
                d="M18 38V26C18 23.2386 20.2386 21 23 21H41C43.7614 21 46 23.2386 46 26V38C46 40.7614 43.7614 43 41 43H23C20.2386 43 18 40.7614 18 38Z"
                fill="white" />
              <path d="M32 26V38" stroke="#6366f1" stroke-width="3" stroke-linecap="round" />
              <path d="M26 32H38" stroke="#6366f1" stroke-width="3" stroke-linecap="round" />
              <circle cx="32" cy="32" r="3" fill="#6366f1" />
              <defs>
                <linearGradient
                  id="paint0_linear"
                  x1="4"
                  y1="4"
                  x2="60"
                  y2="60"
                  gradientUnits="userSpaceOnUse">
                  <stop stop-color="#6366f1" />
                  <stop offset="1" stop-color="#8b5cf6" />
                </linearGradient>
              </defs>
            </svg>
          </div>
        </div>

        <h1 class="text-3xl font-bold text-white mb-2 text-shadow-lg">💰 MyBalance</h1>
        <p class="text-primary-100 text-lg font-medium">Control financiero inteligente</p>
      </div>
    </div>

    <!-- Enhanced Login Card -->
    <div
      class="login-card bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl p-8 border border-white/20">
      <div class="mb-6">
        <h2 class="text-2xl font-bold text-gray-900 text-center mb-2">Bienvenido de vuelta</h2>
        <p class="text-gray-600 text-center">Ingresa tus credenciales para continuar</p>
      </div>

      <!-- Login Form -->
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Enhanced Email Field -->
        <div class="space-y-2">
          <mat-form-field appearance="outline" class="w-full enhanced-form-field">
            <input
              matInput
              type="email"
              formControlName="email"
              placeholder="Correo electrónico"
              class="text-base" />
            <mat-icon matSuffix class="text-primary-400">email</mat-icon>
            <mat-error>{{ getFieldError('email') }}</mat-error>
          </mat-form-field>
        </div>

        <!-- Enhanced Password Field -->
        <div class="space-y-2">
          <mat-form-field appearance="outline" class="w-full enhanced-form-field">
            <input
              matInput
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password"
              placeholder="Contraseña"
              class="text-base" />
            <button
              mat-icon-button
              matSuffix
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hidePassword"
              type="button">
              <mat-icon class="text-primary-400">
                {{ hidePassword ? 'visibility_off' : 'visibility' }}
              </mat-icon>
            </button>
            <mat-error>{{ getFieldError('password') }}</mat-error>
          </mat-form-field>
        </div>

        <!-- Enhanced Error Message -->
        <div
          *ngIf="errorMessage"
          class="bg-error-50 border-l-4 border-error-500 rounded-r-lg p-4 flex items-center space-x-3 animate-slide-in-up">
          <mat-icon class="text-error-500">error_outline</mat-icon>
          <div>
            <p class="text-error-800 font-medium text-sm">Error de autenticación</p>
            <p class="text-error-700 text-sm">{{ errorMessage }}</p>
          </div>
        </div>

        <!-- Enhanced Submit Button -->
        <button
          mat-raised-button
          color="primary"
          type="submit"
          class="w-full h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 enhanced-button"
          [disabled]="!loginForm.valid || isLoading">
          <div *ngIf="isLoading" class="flex items-center justify-center space-x-3">
            <mat-spinner diameter="24" strokeWidth="3"></mat-spinner>
            <span>Iniciando sesión...</span>
          </div>
          <span *ngIf="!isLoading" class="flex items-center justify-center space-x-2">
            <mat-icon>login</mat-icon>
            <span>Iniciar Sesión</span>
          </span>
        </button>
      </form>

      <!-- Enhanced Biometric Authentication Section -->
      <div *ngIf="biometricSupported" class="mt-8">
        <div class="relative">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-gray-200"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-white text-gray-500 font-medium">o continúa con</span>
          </div>
        </div>

        <!-- Enhanced Biometric Login Button -->
        <button
          mat-raised-button
          color="accent"
          class="w-full h-14 mt-6 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 biometric-button"
          [disabled]="biometricLoading"
          (click)="onBiometricLogin()">
          <div *ngIf="biometricLoading" class="flex items-center justify-center space-x-3">
            <mat-spinner diameter="24" strokeWidth="3"></mat-spinner>
            <span>Autenticando...</span>
          </div>
          <span *ngIf="!biometricLoading" class="flex items-center justify-center space-x-2">
            <mat-icon class="text-2xl">fingerprint</mat-icon>
            <span>Autenticación Biométrica</span>
          </span>
        </button>

        <!-- Enhanced Register Biometric Button -->
        <button
          *ngIf="showRegisterBiometric"
          mat-stroked-button
          color="primary"
          class="w-full h-12 mt-4 text-sm font-medium rounded-xl transition-all duration-300"
          [disabled]="biometricLoading || !loginForm.valid"
          (click)="onRegisterBiometric()">
          <span class="flex items-center justify-center space-x-2">
            <mat-icon>add_circle_outline</mat-icon>
            <span>Configurar Huella Digital</span>
          </span>
        </button>

        <!-- Enhanced Clear Biometric Credentials -->
        <button
          *ngIf="!showRegisterBiometric"
          mat-button
          color="warn"
          class="w-full h-10 mt-3 text-xs hover:bg-error-50 rounded-lg transition-all duration-300"
          (click)="onClearBiometricCredentials()">
          <span class="flex items-center justify-center space-x-1">
            <mat-icon class="text-base">delete_outline</mat-icon>
            <span>Eliminar Credenciales Biométricas</span>
          </span>
        </button>
      </div>

      <!-- Enhanced Biometric Not Supported Message -->
      <div
        *ngIf="!biometricSupported"
        class="mt-8 bg-warning-50 border border-warning-200 rounded-xl p-4">
        <div class="flex items-start space-x-3">
          <mat-icon class="text-warning-600 mt-0.5">info_outline</mat-icon>
          <div class="text-sm text-warning-800">
            <p class="font-semibold mb-1">Autenticación biométrica no disponible</p>
            <p class="leading-relaxed">
              Tu dispositivo no soporta autenticación por huella digital o no está configurada
              correctamente.
            </p>
          </div>
        </div>
      </div>

      <!-- Enhanced Footer Section -->
      <div class="mt-8 pt-6 border-t border-gray-100">
        <!-- Register Link -->
        <div class="text-center mb-6">
          <p class="text-sm text-gray-600">
            ¿No tienes una cuenta?
            <a
              routerLink="/register"
              class="text-primary-600 hover:text-primary-700 font-semibold ml-1 transition-colors duration-200">
              Crear cuenta nueva
            </a>
          </p>
        </div>

        <!-- Enhanced Demo Info -->
        <div
          class="bg-gradient-to-r from-primary-50 to-secondary-50 rounded-xl p-4 border border-primary-100">
          <h3 class="text-sm font-bold text-gray-900 mb-3 flex items-center">
            <mat-icon class="text-base mr-2 text-primary-600">info</mat-icon>
            Datos de demostración
          </h3>
          <div class="grid grid-cols-1 gap-2 text-sm">
            <div class="flex items-center justify-between bg-white/50 rounded-lg p-2">
              <span class="font-medium text-gray-700">Email:</span>
              <span class="font-mono text-primary-700 bg-primary-100 px-2 py-1 rounded text-xs">
                demo&#64;example.com
              </span>
            </div>
            <div class="flex items-center justify-between bg-white/50 rounded-lg p-2">
              <span class="font-medium text-gray-700">Contraseña:</span>
              <span class="font-mono text-primary-700 bg-primary-100 px-2 py-1 rounded text-xs">
                demo123
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Footer -->
    <div class="text-center text-white/80 text-sm mt-6">
      <p class="flex items-center justify-center space-x-1">
        <span>&copy; 2025</span>
        <mat-icon class="text-base">favorite</mat-icon>
        <span>MyBalance - Control financiero inteligente</span>
      </p>
    </div>
  </div>
</div>
